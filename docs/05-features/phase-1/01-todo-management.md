# Phase 1-1: í• ì¼ ê´€ë¦¬ (Todo Management)

> **Phase**: 1 (MVP)  
> **ì¹´í…Œê³ ë¦¬**: í• ì¼ ê´€ë¦¬  
> **ìš°ì„ ìˆœìœ„**: ğŸ”´ í•„ìˆ˜  
> **ì£¼ì°¨**: Week 2 (2ì£¼ì°¨)

---

## ğŸ“‹ ê¸°ëŠ¥ ê°œìš”

Todomate ìŠ¤íƒ€ì¼ì˜ ì§ê´€ì ì¸ í• ì¼ ì…ë ¥ ì¸í„°í˜ì´ìŠ¤ë¡œ, ë¹ ë¥´ê³  ìì—°ìŠ¤ëŸ¬ìš´ í• ì¼ ê´€ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### í•µì‹¬ íŠ¹ì§•

1. **Todomate ìŠ¤íƒ€ì¼ ì…ë ¥**: ì²´í¬ë°•ìŠ¤ + ì¸ë¼ì¸ í…ìŠ¤íŠ¸ ì…ë ¥
2. **Enter ë‹¨ì¶•í‚¤**: ìƒˆ í• ì¼ ì¦‰ì‹œ ìƒì„±
3. **ìƒ‰ìƒ ë¼ë²¨**: ì¹´í…Œê³ ë¦¬ë³„ ìƒ‰ìƒ êµ¬ë¶„
4. **ì¸ë¼ì¸ í¸ì§‘**: í• ì¼ í´ë¦­ ì‹œ ì§ì ‘ ìˆ˜ì •
5. **ë¹ ë¥¸ ì™„ë£Œ**: ì²´í¬ë°•ìŠ¤ë¡œ ì¦‰ì‹œ ì™„ë£Œ í‘œì‹œ

---

## ğŸ¯ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: í• ì¼ ì¶”ê°€í•˜ê¸°
```
1. í• ì¼ ì…ë ¥ í•„ë“œ í´ë¦­ â†’ "ìƒˆ í• ì¼ ì…ë ¥..."
2. í…ìŠ¤íŠ¸ ì…ë ¥: "í”„ë¡œì íŠ¸ A ë§ˆë¬´ë¦¬"
3. Enter í‚¤ ëˆ„ë¦„ â†’ í• ì¼ ì¶”ê°€, ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
4. ìƒˆë¡œìš´ ì…ë ¥ í•„ë“œ í™œì„±í™” ì¤€ë¹„
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì¹´í…Œê³ ë¦¬ ì„ íƒí•˜ê¸°
```
1. í• ì¼ ì…ë ¥ ì¤‘ [ì¹´í…Œê³ ë¦¬ ì„ íƒ] ë²„íŠ¼ í´ë¦­
2. ì¹´í…Œê³ ë¦¬ ë“œë¡­ë‹¤ìš´ ì—´ê¸° (ìƒ‰ìƒ í‘œì‹œ)
   - ğŸŸ¢ ì¼
   - ğŸ”µ í”„ë¡œì íŠ¸
   - ğŸŸ¡ ê°œì¸
   - ğŸŸ£ í•™ìŠµ
3. ì¹´í…Œê³ ë¦¬ ì„ íƒ â†’ ì…ë ¥ í•„ë“œ ì˜†ì— ìƒ‰ìƒ ë°°ì§€ í‘œì‹œ
4. Enterë¡œ í• ì¼ ìƒì„±
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: í• ì¼ ì™„ë£Œí•˜ê¸°
```
1. í• ì¼ ìš°ì¸¡ì˜ ì²´í¬ë°•ìŠ¤ í´ë¦­
2. ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸:
   - âœ… ì²´í¬ ì•„ì´ì½˜ í‘œì‹œ
   - í…ìŠ¤íŠ¸ ìƒ‰ìƒ #A7ABB3ë¡œ ë³€ê²½
   - í…ìŠ¤íŠ¸ì— ì·¨ì†Œì„  ì ìš©
3. ì™„ë£Œ ì‹œê°„ ê¸°ë¡ (DBì— completedAt ì €ì¥)
```

### ì‹œë‚˜ë¦¬ì˜¤ 4: í• ì¼ ìˆ˜ì •í•˜ê¸°
```
1. í• ì¼ í…ìŠ¤íŠ¸ ë”ë¸”í´ë¦­ ë˜ëŠ” í¸ì§‘ ì•„ì´ì½˜ í´ë¦­
2. í…ìŠ¤íŠ¸ í•„ë“œ í™œì„±í™” (ì¸ë¼ì¸ í¸ì§‘)
3. í…ìŠ¤íŠ¸ ìˆ˜ì •
4. Enter ë˜ëŠ” ì™¸ë¶€ í´ë¦­ â†’ ì €ì¥
```

### ì‹œë‚˜ë¦¬ì˜¤ 5: í• ì¼ ì‚­ì œí•˜ê¸°
```
1. í• ì¼ ìš°ì¸¡ ë©”ë‰´ (â‹¯) í´ë¦­
2. ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ í‘œì‹œ
   - í¸ì§‘
   - ë³µì œ
   - ì‚­ì œ
3. "ì‚­ì œ" ì„ íƒ â†’ í™•ì¸ ëŒ€í™”
4. í• ì¼ ì‚­ì œ
```

---

## ğŸ—„ï¸ ë°ì´í„° ëª¨ë¸

### Todo í…Œì´ë¸”

```prisma
model Todo {
  id          String    @id @default(cuid())
  userId      String
  user        User      @relation(fields: [userId], references: [id])
  
  categoryId  String?
  category    Category? @relation(fields: [categoryId], references: [id])
  
  title       String    @db.VarChar(255)
  memo        String?   @db.Text          // ì„ íƒ: ë©”ëª¨/ì„¤ëª…
  
  completed   Boolean   @default(false)
  completedAt DateTime?
  
  // ê³„ì¸µ êµ¬ì¡°
  parentId    String?
  parent      Todo?     @relation("TodoChildren", fields: [parentId], references: [id])
  children    Todo[]    @relation("TodoChildren")
  
  // ì†Œìš”ì‹œê°„
  estimatedMin Int?     // ì˜ˆìƒ ì†Œìš”ì‹œê°„ (ë¶„)
  
  // ì •ë ¬
  order       Int       @default(0)      // ê°™ì€ ë ˆë²¨ ë‚´ ìˆœì„œ
  
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  deletedAt   DateTime? // Soft delete (ì„ íƒ)
}

model Category {
  id      String  @id @default(cuid())
  userId  String
  user    User    @relation(fields: [userId], references: [id])
  
  name    String  @db.VarChar(50)
  color   String  @default("#2D9F6B") // HEX ìƒ‰ìƒ
  order   Int     @default(0)
  
  todos   Todo[]
  
  createdAt DateTime @default(now())
  
  @@unique([userId, name])
}
```

### Category (ì´ˆê¸° ê¸°ë³¸ê°’)

```json
[
  { "name": "ì¼", "color": "#2D9F6B" },      // ì´ˆë¡ìƒ‰
  { "name": "í”„ë¡œì íŠ¸", "color": "#5B6B8C" }, // íŒŒë€ìƒ‰
  { "name": "ê°œì¸", "color": "#FF9F43" },    // ì£¼í™©ìƒ‰
  { "name": "í•™ìŠµ", "color": "#9B59B6" }     // ë³´ë¼ìƒ‰
]
```

---

## ğŸ’» êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
TodoList (Server Component)
â”œâ”€â”€ TodoInput (Client Component)
â”‚   â””â”€â”€ CategorySelector
â””â”€â”€ TodoItems (Client Component)
    â”œâ”€â”€ TodoItem (ê° í•­ëª©)
    â”‚   â”œâ”€â”€ Checkbox
    â”‚   â”œâ”€â”€ TodoText
    â”‚   â”œâ”€â”€ MetaInfo (ì‹œê°„, ì¹´í…Œê³ ë¦¬)
    â”‚   â””â”€â”€ Menu (â‹¯)
    â””â”€â”€ [ë°˜ë³µ]
```

### Server Actions

```typescript
// app/actions/todo-actions.ts

// í• ì¼ ìƒì„±
async function createTodo(input: {
  title: string
  categoryId?: string
  estimatedMin?: number
  parentId?: string
}): Promise<Todo>

// í• ì¼ ìˆ˜ì •
async function updateTodo(id: string, input: {
  title?: string
  categoryId?: string
  estimatedMin?: number
}): Promise<Todo>

// í• ì¼ ì™„ë£Œ í† ê¸€
async function toggleTodo(id: string): Promise<Todo>

// í• ì¼ ì‚­ì œ
async function deleteTodo(id: string): Promise<void>

// ì—¬ëŸ¬ í• ì¼ ìˆœì„œ ë³€ê²½ (ì •ë ¬ í›„ ì‚¬ìš©)
async function reorderTodos(items: Array<{
  id: string
  order: number
  parentId?: string
}>): Promise<void>
```

### API Routes (í•„ìš”ì‹œ)

```
GET  /api/todos            # ëª¨ë“  í• ì¼ ì¡°íšŒ
GET  /api/todos/[id]       # íŠ¹ì • í• ì¼ ì¡°íšŒ
POST /api/todos            # í• ì¼ ìƒì„±
PUT  /api/todos/[id]       # í• ì¼ ìˆ˜ì •
DEL  /api/todos/[id]       # í• ì¼ ì‚­ì œ
```

### UI ì»´í¬ë„ŒíŠ¸ ëª…ì„¸

#### 1. TodoItem

```tsx
interface TodoItemProps {
  todo: Todo
  category?: Category
  onToggle: (id: string) => Promise<void>
  onUpdate: (id: string, data: Partial<Todo>) => Promise<void>
  onDelete: (id: string) => Promise<void>
}

// ë Œë”ë§:
// [ â˜ ] í• ì¼ í…ìŠ¤íŠ¸                  [ğŸ·ï¸] [â±ï¸] [â‹¯]
// â””â”€ ì²´í¬ë°•ìŠ¤  â””â”€ 16px/400  â””â”€ ìš°ì¸¡ ë©”íƒ€
```

**ë†’ì´**: 40px  
**í˜¸ë²„**: ë°°ê²½ #F8F9FAë¡œ ë³€ê²½, ì•„ì´ì½˜ í‘œì‹œ  
**ì™„ë£Œ**: í…ìŠ¤íŠ¸ #A7ABB3, ì·¨ì†Œì„  ì¶”ê°€  
**í™œì„±**: ë°°ê²½ #E8F5EE (Primary Light)

#### 2. TodoInput

```tsx
interface TodoInputProps {
  placeholder?: string
  onSubmit: (input: CreateTodoInput) => Promise<void>
}

// ë Œë”ë§:
// [ â˜ ] [ìƒˆ í• ì¼ ì…ë ¥...] [ì¹´í…Œê³ ë¦¬ â–¼] [ì‹œê°„ â±ï¸]
```

**ê¸°ëŠ¥**:
- Enter: í• ì¼ ìƒì„±
- Shift+Enter: ì¤„ë°”ê¿ˆ (í…ìŠ¤íŠ¸ ê¸¸ì–´ì§ˆ ê²½ìš°)
- Escape: ì…ë ¥ ì·¨ì†Œ (ë¹„ì–´ìˆì„ ë•Œ)
- Tab: ë‹¤ìŒ í•„ë“œë¡œ (êµ¬í˜„: Week 3)

#### 3. CategorySelector

```tsx
interface CategorySelectorProps {
  value?: string
  categories: Category[]
  onChange: (categoryId: string) => void
}

// ë“œë¡­ë‹¤ìš´ UI:
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ ğŸŸ¢ ì¼               â”‚
// â”‚ ğŸ”µ í”„ë¡œì íŠ¸         â”‚
// â”‚ ğŸŸ¡ ê°œì¸             â”‚
// â”‚ ğŸŸ£ í•™ìŠµ             â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âŒ¨ï¸ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤

| ë‹¨ì¶•í‚¤ | ë™ì‘ |
| --- | --- |
| `Enter` | í• ì¼ ìƒì„± (ì…ë ¥ í•„ë“œì—ì„œ) |
| `Ctrl+Enter` | ë©”ëª¨ ì…ë ¥ ì¤‘ ì¤„ë°”ê¿ˆ |
| `Escape` | ì…ë ¥ ì·¨ì†Œ (ì…ë ¥ í•„ë“œ ë¹„ì›Œì§€ë©´ ìˆ¨ê¹€) |
| `Delete` | í• ì¼ ì‚­ì œ (ì„ íƒ ì‹œ, í™•ì¸ í›„) |
| `Tab` | ë‹¤ìŒ í•„ë“œ í¬ì»¤ìŠ¤ (Week 3) |
| `Shift+Tab` | ì´ì „ í•„ë“œ í¬ì»¤ìŠ¤ (Week 3) |

---

## ğŸ¨ UI ìƒíƒœ

### 1. ì…ë ¥ í•„ë“œ ìƒíƒœ

| ìƒíƒœ | ìŠ¤íƒ€ì¼ |
| --- | --- |
| **ê¸°ë³¸** | ë°°ê²½ White, í…Œë‘ë¦¬ #E5E7EB, í”Œë ˆì´ìŠ¤í™€ë” #A7ABB3 |
| **í¬ì»¤ìŠ¤** | í…Œë‘ë¦¬ 2px solid #2D9F6B, ì‰ë„ìš° 0 0 0 3px rgba(45, 159, 107, 0.1) |
| **ì…ë ¥ ì¤‘** | ë°°ê²½ White, í…ìŠ¤íŠ¸ #2B2D36 |

### 2. í• ì¼ ìƒíƒœ

| ìƒíƒœ | ì„¤ëª… |
| --- | --- |
| **ë¯¸ì™„ë£Œ** | ë°°ê²½ White, í…ìŠ¤íŠ¸ #2B2D36, ì²´í¬ë°•ìŠ¤ ë¹ˆìƒíƒœ |
| **í˜¸ë²„** | ë°°ê²½ #F8F9FA, ìš°ì¸¡ ë©”ë‰´ ì•„ì´ì½˜ í‘œì‹œ |
| **ì™„ë£Œ** | í…ìŠ¤íŠ¸ #A7ABB3 + ì·¨ì†Œì„ , ë°°ê²½ #F8F9FA, ì²´í¬ë°•ìŠ¤ âœ… |
| **ì„ íƒ** | ë°°ê²½ #E8F5EE, ì¢Œì¸¡ ì„ íƒ ë°” |

---

## ğŸš€ ì„±ëŠ¥ ìµœì í™”

### React Query í™œìš©

```typescript
// hooks/use-todos.ts
export function useTodos() {
  return useQuery({
    queryKey: ['todos'],
    queryFn: () => fetch('/api/todos').then(r => r.json()),
    staleTime: 5 * 60 * 1000, // 5ë¶„
  })
}

export function useTodoMutation() {
  const queryClient = useQueryClient()
  
  return useMutation({
    mutationFn: createTodo,
    onMutate: (newTodo) => {
      // Optimistic update
      queryClient.setQueryData(['todos'], (old) => [
        ...old,
        { id: 'temp', ...newTodo }
      ])
    },
    onSuccess: () => {
      queryClient.invalidateQueries(['todos'])
    }
  })
}
```

### useOptimistic (React 19)

```typescript
export function TodoItem({ todo }) {
  const [optimisticTodo, setOptimisticTodo] = useOptimistic(todo)

  async function handleToggle() {
    setOptimisticTodo({ ...todo, completed: !todo.completed })
    await toggleTodo(todo.id)
  }
}
```

---

## âœ… ì™„ë£Œ ê¸°ì¤€

- [ ] Todo ëª¨ë¸ DB ì €ì¥ ê°€ëŠ¥
- [ ] í• ì¼ ìƒì„±/ìˆ˜ì •/ì‚­ì œ ì™„ì „ ì‘ë™
- [ ] ì²´í¬ë°•ìŠ¤ë¡œ ì™„ë£Œ/ë¯¸ì™„ë£Œ í† ê¸€
- [ ] Todomate ìŠ¤íƒ€ì¼ UI êµ¬í˜„
- [ ] ìƒ‰ìƒ ë¼ë²¨ ì‹œìŠ¤í…œ ì‘ë™
- [ ] ì¹´í…Œê³ ë¦¬ ì„ íƒ ê¸°ëŠ¥
- [ ] ì¸ë¼ì¸ í¸ì§‘ ê¸°ëŠ¥
- [ ] ì†Œìš”ì‹œê°„ ì…ë ¥ ì˜µì…˜
- [ ] Optimistic UI ì—…ë°ì´íŠ¸
- [ ] ëª¨ë“  ì—ëŸ¬ ì¼€ì´ìŠ¤ ì²˜ë¦¬

---

## ğŸ“Œ ì—°ê´€ ê¸°ëŠ¥

- **Week 3**: [ë“œë˜ê·¸ì•¤ë“œë¡­](./02-drag-and-drop.md) (ìˆœì„œ ì¬ë°°ì¹˜)
- **Week 4**: [ìº˜ë¦°ë” í†µí•©](./03-calendar-integration.md) (í• ì¼ â†’ ìº˜ë¦°ë” ì´ë™)

---

**Last Updated**: 2025-10-17
